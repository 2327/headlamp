var indexes={},lunars={},searchVisible=!1,firstRun=!0,list=document.getElementById('searchResultsList'),first=list.firstChild,last=list.lastChild,maininput=document.getElementById('searchInput'),searchResults=document.getElementById("searchResults"),resultsAvailable=!1,fuse;document.addEventListener('keydown',function(a){a.key==='/'&&(searchVisible||(maininput.focus(),searchVisible=!0,a.preventDefault(),maininput.value='')),a.key==='Escape'&&searchVisible&&(maininput.value='',searchResults.style.visibility="hidden",document.activeElement.blur(),searchVisible=!1),a.key==='ArrowDown'&&resultsAvailable&&(a.preventDefault(),document.activeElement==maininput?first.focus():document.activeElement==last?last.focus():document.activeElement.parentElement.nextSibling.firstElementChild.focus()),a.key==='ArrowUp'&&resultsAvailable&&(a.preventDefault(),document.activeElement==maininput?maininput.focus():document.activeElement==first?maininput.focus():document.activeElement.parentElement.previousSibling.firstElementChild.focus())});let searchThrottleId=-1;maininput.onkeyup=function(a){if(a.code.startsWith('Key')){if(!fuse&&firstRun){loadSearch(),firstRun=!1;return}searchThrottleId>=0&&clearTimeout(searchThrottleId),searchThrottleId=setTimeout(()=>{searchThrottleId=-1,searchVisible=!0,executeSearch(this.value)},150)}};function fetchJSONFile(c,b){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(a.readyState===4)if(a.status===200){var c=JSON.parse(a.responseText);b&&b(c)}},a.open('GET',c),a.send()}function loadSearch(){let a=maininput.value;!!a&&!resultsAvailable&&(list.innerHTML='<li class="no-results">Searching…</li>'),fetchJSONFile((window.location.baseurl||'')+'/index.json',function(a){index=a;function c(a,b){return lunr(function(){this.ref('permalink'),this.field('title'),this.field('permalink'),this.field('categories'),this.field('contentList'),this.field('tags'),b[a].forEach(b=>{let c=indexes[a]||{};c[b.permalink]=b,indexes[a]=c,this.add(b)})})}Object.keys(a).forEach(b=>{lunars[b]=c(b,a)});let b=maininput.value;!!b&&!resultsAvailable&&executeSearch(b)})}function executeSearch(d){if(Object.keys(lunars).length===0)return;searchResults.style.visibility="visible";let c=maininput.dataset.searchVersion;resultsAvailable||(list.innerHTML='<li class="no-results">Searching…</li>');let a=lunars[c].search(d+'*'),b='';if(a.length===0)resultsAvailable=!1,b='<li class="no-results">No results. Try different search terms.</li>';else{for(let e of a.slice(0,100)){let d=indexes[c][e.ref];if(d.title===0)continue;let f=`<span class="contents">${d.contentList.slice(0,100).join(' ')}<span>`;b+=`<li><a href="${d.permalink}" tabindex="0"><span class="title">${d.title}</span><br />${f}</a></li>`}resultsAvailable=!0}list.innerHTML=b,a.length>0&&(first=list.firstChild.firstElementChild,last=list.lastChild.firstElementChild)}